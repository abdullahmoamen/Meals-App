{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abdullah/Desktop/React_course_UDEMY-resources/meal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Abdullah/Desktop/React_course_UDEMY-resources/meal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Abdullah/Desktop/React_course_UDEMY-resources/meal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import classes from'./Cart.module.css';import Modal from'../Ui/Modal';import CartContext from'./../../Store/CartContext';import CartItem from'./CartItem';import CheckOut from'./CheckOut';import{motion}from'framer-motion';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var divVariants={hidden:{opacity:0,y:'50vh'},visible:{opacity:1,y:0,transition:{type:'spring',delay:0.5}},exit:{y:\"-50vw\",transition:{ease:'easeInOut'}}};var Cart=function Cart(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCheckout=_useState2[0],setIsCheckout=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitting=_useState4[0],setIsSubmitting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),didSubmit=_useState6[0],setDidSubmit=_useState6[1];var cartCtx=useContext(CartContext);var totalAmount=\"$\".concat(cartCtx.totalAmount.toFixed(2));var hasItems=cartCtx.items.length>0;var cartItemRemoveHandler=function cartItemRemoveHandler(id){cartCtx.removeItem(id);};var cartItemAddeHandler=function cartItemAddeHandler(item){cartCtx.addItem(item);};var handleOrder=function handleOrder(){setIsCheckout(true);};var submitOrderHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userData){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSubmitting(true);_context.next=3;return fetch('https://meals-7c8f6-default-rtdb.firebaseio.com/orders.json',{method:'POST',body:JSON.stringify({user:userData,orderedItems:cartCtx.items})});case 3:setIsSubmitting(false);setDidSubmit(true);cartCtx.clearCart();case 6:case\"end\":return _context.stop();}}},_callee);}));return function submitOrderHandler(_x){return _ref.apply(this,arguments);};}();var cartItems=/*#__PURE__*/_jsx(\"ul\",{className:classes['cart-items'],children:cartCtx.items.map(function(item){return/*#__PURE__*/_jsx(CartItem,{name:item.name,amount:item.amount,price:item.price,onRemove:cartItemRemoveHandler.bind(null,item.id),onAdd:cartItemAddeHandler.bind(null,item)},item.id);})});var actions=/*#__PURE__*/_jsxs(motion.div,{variants:divVariants,initial:\"hidden\",animate:\"visible\",exit:\"exit\",className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{className:classes['button--alt'],onClick:props.hideCart,children:\"Close\"}),hasItems&&/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:handleOrder,children:\"Order\"})]});var cartModelContent=/*#__PURE__*/_jsxs(_Fragment,{children:[cartItems,/*#__PURE__*/_jsxs(\"div\",{className:classes.total,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{children:totalAmount})]}),isCheckout&&/*#__PURE__*/_jsx(CheckOut,{onCancel:props.hideCart,onConfirm:submitOrderHandler}),!isCheckout&&actions]});var isSubmittingModalContent=/*#__PURE__*/_jsx(\"p\",{children:\"Sending Order Data....\"});var didSubmitModalContent=/*#__PURE__*/_jsxs(motion.div,{variants:divVariants,initial:\"hidden\",animate:\"visible\",exit:\"exit\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Your Order Is Sent Successfuly \\uD83D\\uDC97\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:props.hideCart,children:\"Close\"})})]});return/*#__PURE__*/_jsxs(Modal,{hideCart:props.hideCart,children:[!isSubmitting&&!didSubmit&&cartModelContent,isSubmitting&&isSubmittingModalContent,!isSubmitting&&didSubmit&&didSubmitModalContent]});};export default Cart;","map":{"version":3,"sources":["C:/Users/Abdullah/Desktop/React_course_UDEMY-resources/meal/src/components/Cart/Cart.js"],"names":["React","useContext","useState","classes","Modal","CartContext","CartItem","CheckOut","motion","divVariants","hidden","opacity","y","visible","transition","type","delay","exit","ease","Cart","props","isCheckout","setIsCheckout","isSubmitting","setIsSubmitting","didSubmit","setDidSubmit","cartCtx","totalAmount","toFixed","hasItems","items","length","cartItemRemoveHandler","id","removeItem","cartItemAddeHandler","item","addItem","handleOrder","submitOrderHandler","userData","fetch","method","body","JSON","stringify","user","orderedItems","clearCart","cartItems","map","name","amount","price","bind","actions","hideCart","button","cartModelContent","total","isSubmittingModalContent","didSubmitModalContent"],"mappings":"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","sourcesContent":["import React , {useContext,useState} from 'react';\r\nimport classes from './Cart.module.css';\r\nimport Modal from '../Ui/Modal';\r\nimport CartContext from './../../Store/CartContext';\r\nimport CartItem from './CartItem';\r\nimport CheckOut from './CheckOut';\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nconst divVariants = {\r\n    hidden: { \r\n        opacity: 0, \r\n        y: '50vh' \r\n    },\r\n    visible: { \r\n        opacity: 1, \r\n        y: 0,\r\n        transition: { type: 'spring', delay: 0.5 }\r\n    },\r\n    exit: {\r\n        y: \"-50vw\",\r\n        transition: { ease: 'easeInOut' }\r\n    }\r\n    };\r\n\r\nconst Cart = (props) => {\r\n\r\n    const [isCheckout,setIsCheckout]=useState(false);\r\n    const [isSubmitting,setIsSubmitting]=useState(false);\r\n    const [didSubmit,setDidSubmit]=useState(false);\r\n    const cartCtx =useContext(CartContext);\r\n\r\n    const totalAmount = `$${cartCtx.totalAmount.toFixed(2)}`;\r\n    const hasItems=cartCtx.items.length > 0;\r\n\r\n    \r\n    const cartItemRemoveHandler=id=>{\r\n        cartCtx.removeItem(id)\r\n    }\r\n    \r\n    const cartItemAddeHandler=item=>{\r\n        cartCtx.addItem(item);\r\n    }\r\n    \r\n    const handleOrder=()=>{\r\n        setIsCheckout(true)\r\n    }\r\n\r\n    const submitOrderHandler= async (userData)=>{\r\n                setIsSubmitting(true);\r\n                await fetch('https://meals-7c8f6-default-rtdb.firebaseio.com/orders.json',{\r\n                method:'POST',\r\n                body: JSON.stringify({\r\n                    user: userData,\r\n                    orderedItems: cartCtx.items\r\n                })\r\n            });\r\n            setIsSubmitting(false);\r\n            setDidSubmit(true);\r\n            cartCtx.clearCart();\r\n    };\r\n\r\n    const cartItems = (\r\n        <ul className={classes['cart-items']}>\r\n        {cartCtx.items.map((item) => (\r\n            <CartItem\r\n            key={item.id}\r\n            name={item.name}\r\n            amount={item.amount}\r\n            price={item.price}\r\n            onRemove={cartItemRemoveHandler.bind(null, item.id)}\r\n            onAdd={cartItemAddeHandler.bind(null, item)}\r\n            />\r\n        ))}\r\n        </ul>\r\n    ); \r\n\r\n    const actions = \r\n    <motion.div\r\n    variants={divVariants}\r\n    initial=\"hidden\"\r\n    animate=\"visible\"\r\n    exit=\"exit\"\r\n    className={classes.actions}>\r\n    <button className={classes['button--alt']} onClick={props.hideCart}>Close</button>\r\n    {hasItems && <button className={classes.button} onClick={handleOrder}>Order</button>}\r\n    </motion.div>\r\n\r\n    const cartModelContent = \r\n    <>\r\n    {cartItems}\r\n        <div className={classes.total}>\r\n            <span>Total Amount</span>\r\n            <span>{totalAmount}</span>\r\n        </div>\r\n        {isCheckout && (\r\n        <CheckOut \r\n        onCancel={props.hideCart}\r\n        onConfirm={submitOrderHandler}\r\n        />)}\r\n        {!isCheckout && actions}\r\n    </>\r\n\r\n    const isSubmittingModalContent = <p>Sending Order Data....</p>\r\n    \r\n    const didSubmitModalContent =\r\n    <motion.div\r\n    variants={divVariants}\r\n    initial=\"hidden\"\r\n    animate=\"visible\"\r\n    exit=\"exit\"\r\n    > \r\n        <p>Your Order Is Sent Successfuly 💗</p>\r\n        <div className={classes.actions}>\r\n        <button className={classes.button}\r\n        onClick={props.hideCart}>\r\n        Close</button>\r\n        </div>\r\n        </motion.div>\r\n    return (\r\n        <Modal hideCart={props.hideCart}>\r\n            {!isSubmitting && !didSubmit && cartModelContent}\r\n            {isSubmitting && isSubmittingModalContent}\r\n            {!isSubmitting && didSubmit && didSubmitModalContent}\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}